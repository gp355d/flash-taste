<template>
  <section class="">
    <div class="d-flex flex-column justify-content-center align-items-center px-5 px-lg-0" style="background-image: url(https://images.unsplash.com/photo-1522747776116-64ee03be1dad?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80);background-repeat: no-repeat;background-size: cover;height: 450px;background-position: center;">
      <div class="d-flex flex-column justify-content-center align-items-center px-lg-5 py-lg-2  px-2 py-1" style="background: rgba(255, 255, 255, 0.6); border-radius: 24px">
        <img src="../../assets/logo4-1.svg" alt="logo" width="260" height="160" class="img-fluid"  />
        <h3 class="fs-2 fs-lg-1 text-center mb-4">療癒一杯，感受生活的美好</h3>
        <h1 class="fs-3 fs-lg-2 text-center text-gray-dark mb-8">尋找心靈的寧靜之旅</h1>
        <a href="#/products" class="btn btn-primary fs-lg-5 px-5 py-3 px-lg-6">立即探索</a>
      </div>
    </div>
  </section>
  <div class="py-5">
    <section class="container" >
    <h2 class="text-center text-primary fw-bold">產品特色</h2>
    <ul class="row d-block d-md-flex align-items-center justify-content-md-end list-unstyled position-relative" >
      <li class="col-md-8">
        <img class="rounded-3 indexAboutImg img-fluid object-fit-cover" src= "https://images.unsplash.com/photo-1582650859079-ee63913ecb84?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80" alt="">
      </li>
      <li class="col-md-5 position-absolute start-0 position-none">
        <div class="d-flex flex-column justify-content-center align-items-center  align-items-md-start rounded-3 bg-white p-4" style="min-height: 250px;">
          <div class="text-center text-md-start">
            <h2 class="fw-bold">優質的烘焙技術</h2>
              <span class="">品嚐我們的優質茶葉，來自於全球各地的茶園，保證新鮮、香醇。</span>
          </div>
        </div>
      </li>
    </ul>
    </section>
    <section class="container" >
    <ul class="row d-block d-md-flex align-items-center list-unstyled position-relative" >
      <li class="col-md-8">
        <img class="rounded-3 indexAboutImg img-fluid object-fit-cover w-100" src="https://images.unsplash.com/photo-1579887829663-67706e62e6ac?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=640&q=80)" alt="">
      </li>
      <li class="col-md-5 d-md-flex flex-md-column position-absolute end-0 position-none">
        <div class="rounded-3 bg-white d-flex flex-column justify-content-center p-4" style="min-height: 250px;">
          <div class="text-center text-md-start">
            <h2 class="fw-bold">風味多樣的選擇</h2>
              <span class="">茶品系列豐富多彩，包括清新的綠茶、馥郁的烏龍茶、濃郁的紅茶等，滿足您不同口味的需求。</span>
          </div>
        </div>
      </li>
    </ul>
    </section>
    <section class="container" >
    <ul class="row d-block d-md-flex align-items-center justify-content-md-end list-unstyled position-relative mb-0">
      <li class="col-md-8">
        <img class="bg-cover rounded-3 indexAboutImg img-fluid object-fit-cover" src="https://images.unsplash.com/photo-1558160074-4d7d8bdf4256?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
      </li>
      <li class="col-md-5 position-absolute start-0 position-none">
        <div class="d-flex flex-column justify-content-center align-items-center  align-items-md-start rounded-3 bg-white p-4" style="min-height: 250px;">
          <div class="text-center text-md-start">
            <h2 class="fw-bold">健康享受的美好時刻</h2>
              <span class="">茶葉含有豐富的營養成分和抗氧化劑，每一口茶都是對健康的呵護，讓您享受健康生活的美好時刻。</span>
          </div>
        </div>
      </li>
    </ul>
    </section>
  </div>
  <!-- <section class="container py-3 mb-240" >
  <h2 class="text-center text-primary fw-bold mb-0">產品特色</h2>
  <ul class="row d-block d-md-flex align-items-center justify-content-md-end list-unstyled position-relative min-h140" >
    <li class="col-md-8">
      <div class="bg-cover rounded-3 indexAboutImg" style="background-image: url(https://images.unsplash.com/photo-1582650859079-ee63913ecb84?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80);"></div>
    </li>
    <li class="col-md-5 position-absolute start-0" style="right: auto;">
      <div class="d-flex flex-column justify-content-center align-items-center  align-items-md-start rounded-3 bg-white p-4" style="min-height:300px;">
        <div class="text-center text-md-start">
          <h2 class="fw-bold">優質的烘焙技術</h2>
            <span class="">品嚐我們的優質茶葉，來自於全球各地的茶園，保證新鮮、香醇。</span>
        </div>
      </div>
    </li>
  </ul>
</section> -->
<!-- <section class="container py-3 mb-240" >
<ul class="row d-block d-md-flex align-items-center list-unstyled position-relative min-h140" >
    <li class="col-md-8">
      <div class="bg-cover rounded-3 indexAboutImg" style="background-image: url(https://images.unsplash.com/photo-1579887829663-67706e62e6ac?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=640&q=80);"></div>
    </li>
    <li class="col-md-5 d-md-flex flex-md-column position-absolute end-0">
      <div class="rounded-3 bg-white d-flex flex-column justify-content-center p-4" style="min-height:300px;">
        <div class="text-center text-md-start">
          <h2 class="fw-bold">風味多樣的選擇</h2>
            <span class="">茶品系列豐富多彩，包括清新的綠茶、馥郁的烏龍茶、濃郁的紅茶等，滿足您不同口味的需求。</span>
        </div>
      </div>
    </li>
  </ul>
</section> -->
<!-- <section class="container py-3 mb-240" >
  <ul class="row d-block d-md-flex align-items-center justify-content-md-end list-unstyled position-relative min-h140">
    <li class="col-md-8">
      <div class="bg-cover rounded-3 indexAboutImg" style="background-image: url(https://images.unsplash.com/photo-1558160074-4d7d8bdf4256?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);"></div>
    </li>
    <li class="col-md-5 position-absolute start-0" style="right: auto;">
      <div class="d-flex flex-column justify-content-center align-items-center  align-items-md-start rounded-3 bg-white p-4" style="min-height:300px;">
        <div class="text-center text-md-start">
          <h2 class="fw-bold">健康享受的美好時刻</h2>
            <span class="">茶葉含有豐富的營養成分和抗氧化劑，每一口茶都是對健康的呵護，讓您享受健康生活的美好時刻。</span>
        </div>
      </div>
    </li>
  </ul>
</section> -->
    <div class="">
      <div class="container mb-3 py-5">
        <h2 class="text-center text-primary fw-bold">精選產品</h2>
        <div class="row">
          <template v-for="(item,i) in products" :key="item.id">
            <div class="col-lg-3 col-md-6 mb-3 hovershow-btn" v-if="i < 4">
              <div class="card h-100 border border-1 rounded-top">
                <a href="" @click.prevent="this.$router.push(`/product/${item.id}`)">
                  <img class="img-fluid object-fit-cover rounded-top position-relative" style="height: 300px;"
                    :src="item.imageUrl"
                    :alt="`img-${item.title}`">
                </a>
                  <div class="p-3">
                    <h3>{{item.title}}</h3>
                    <!-- <div  v-html="item.description"></div> -->
                    <div v-if="item.price !== item.origin_price">
                      <span class="fs-3 text-danger">{{$filters.currency(item.price)}}</span>
                      <del class="fs-2 ms-2">{{$filters.currency(item.origin_price)}}</del>
                    </div>
                    <span v-else class="fs-3 text-danger">{{$filters.currency(item.origin_price)}}</span>
                  </div>
                  <div>
                    <a class="btn-lg btn btn-primary addtocart-btn text-nowrap position-absolute top-50 start-50 translate-middle" @click.prevent="addToCart(item.id)">加入購物車</a>
                  </div>
                  <div class="d-grid gap-2 mx-auto col-8 mb-2">
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>
    </div>
        <!-- <div class="container mb-3 py-5">
      <h2 class="text-center fw-bold text-primary">產品特色</h2>
      <div class="row flex-row-reverse">
        <div class="col-md-6">
          <img src="https://images.unsplash.com/photo-1582650859079-ee63913ecb84?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80" alt="feature-img1" class="img-fluid rounded-3 object-fit-cover">
        </div>
        <div class="col-md-6 d-flex flex-md-column flex-column justify-content-center">
          <div class="text-center text-md-start">
            <h2 class="fw-bold">優質的烘焙技術</h2>
            <span class="">品嚐我們的優質茶葉，來自於全球各地的茶園，保證新鮮、香醇。</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <img src="https://images.unsplash.com/photo-1579887829663-67706e62e6ac?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=640&q=80" alt="feature-img2" class="img-fluid rounded-3 object-fit-cover">
        </div>
        <div class="col-md-6 d-flex flex-md-column flex-column justify-content-center">
          <div class="text-center text-md-start">
            <h2 class="fw-bold">風味多樣的選擇</h2>
            <span class="">茶品系列豐富多彩，包括清新的綠茶、馥郁的烏龍茶、濃郁的紅茶等，滿足您不同口味的需求。</span>
          </div>
        </div>
      </div>
      <div class="row flex-row-reverse">
        <div class="col-md-6">
          <img src="https://images.unsplash.com/photo-1558160074-4d7d8bdf4256?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="feature-img3" class="img-fluid rounded-3 object-fit-cover">
        </div>
        <div class="col-md-6 d-flex flex-md-column flex-column justify-content-center">
          <div class="text-center text-md-start">
            <h2 class="fw-bold">健康享受的美好時刻</h2>
            <span class="">茶葉含有豐富的營養成分和抗氧化劑，每一口茶都是對健康的呵護，讓您享受健康生活的美好時刻。</span>
          </div>
        </div>
      </div>
    </div> -->
    <div class="container mb-3 py-5">
      <div class="row flex-row-reverse">
        <div class="col-md-6 mb-md-0 mb-3">
          <div class="rounded-3"
            style="background-image: url('https://images.unsplash.com/photo-1550450339-e7a4787a2074?q=80&w=1904&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');height: 350px;background-size: cover;background-repeat: no-repeat;background-position: center;">
          </div>
        </div>
        <div class="col-md-6 d-flex">
          <div class="d-flex justify-content-center align-items-center">
            <div>
              <h2>歡迎來到我們的茶葉世界！</h2>
              <p>我們的使命是將茶的美好帶給每一位顧客，讓您品味生活的美好滋味。我們堅持品質至上，匠心製茶，致力於為您提供最純淨、最美味的茶品體驗。</p>
              <div class="text-center text-md-start">
                <RouterLink to="/products" class="btn btn-primary">購物去</RouterLink>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="mb-3">
      <div class="container">
        <h2 class="text-center text-primary fw-bold">好評推薦</h2>
        <div class="row">
          <swiper :slides-per-view="1" :space-between="24" class="pb-10"
                :modules="modules"
                navigation
                :pagination="{ clickable: true }"
                :breakpoints="{
              320: {
                slidesPerView: 1,
                spaceBetween: 24,
              },
              768: {
              slidesPerView: 3,
              spaceBetween: 24
            },
              992: {
                slidesPerView: 3,
                spaceBetween: 24,
              }
            }">
                <swiper-slide>
                  <div class="card d-flex h-100">
                        <div class="card-body">
                          <div class="d-flex align-items-center flex-md-column">
                            <img class="rounded-circle object-fit-cover mb-2 mb-lg-2 me-5 me-md-0" src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=1888&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                              alt="recommend-people3" width="120" height="120">
                            <h3 class="text-center fw-normal fs-4 mb-3">wendy lin</h3>
                          </div>
                          <p class="text-start fw-normal fs-6 mb-12 mb-0">茶葉的品質非常穩定，每次都能保持一致的口感和風味。</p>
                        </div>
                      </div>
                </swiper-slide>
                <swiper-slide>
                  <div class="card d-flex h-100">
                        <div class="card-body">
                          <div class="d-flex align-items-center flex-md-column">
                            <img class="rounded-circle object-fit-cover mb-2 mb-lg-2 me-5 me-md-0" src="https://images.unsplash.com/photo-1528892952291-009c663ce843?q=80&w=1888&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                              alt="recommend-people4" width="120" height="120">
                            <h3 class="text-center fw-normal fs-4 mb-3">Tomy wang</h3>
                          </div>
                          <p class="text-start fw-normal fs-6 mb-12 mb-0">我已經向我的朋友們推薦了這款茶葉，他們也都非常喜歡！
                          </p>
                        </div>
                      </div>
                </swiper-slide>
                <swiper-slide>
                  <div class="card d-flex h-100">
                        <div class="card-body">
                          <div class="d-flex align-items-center flex-md-column">
                            <img class="rounded-circle object-fit-cover mb-2 mb-lg-2 me-5 me-md-0" src="https://images.unsplash.com/photo-1541823709867-1b206113eafd?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                              alt="recommend-people4" width="120" height="120">
                            <h3 class="text-center fw-normal fs-4 mb-3">Jacky wang</h3>
                          </div>
                          <p class="text-start fw-normal fs-6 mb-12 mb-0">這是我嘗過的最棒的茶葉了！絕對值得一試！
                          </p>
                        </div>
                      </div>
                </swiper-slide>
                <swiper-slide>
                  <div class="card d-flex h-100">
                        <div class="card-body">
                          <div class="d-flex align-items-center flex-md-column">
                            <img class="rounded-circle object-fit-cover mb-2 mb-lg-2 me-5 me-md-0" src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                              alt="recommend-people4" width="120" height="120">
                            <h3 class="text-center fw-normal fs-4 mb-3">Tom chen</h3>
                          </div>
                          <p class="text-start fw-normal fs-6 mb-12 mb-0">我很喜歡這款茶葉的味道，每天都讓我心情愉悅
                          </p>
                        </div>
                      </div>
                </swiper-slide>
              </swiper>
        </div>
      </div>
    </div>
    <div class="container py-5">
      <div class="row">
        <h2 class="text-center text-primary fw-bold">知識文章</h2>
        <div class="col-lg-4 col-md-6" v-for="article in articleList" :key="article.id">
          <div class="position-relative h-100">
            <span class="position-absolute bg-primary p-2 rounded-3 text-white" style="left: -3%;top: 10%;">{{ $filters.date(article.create_at)}}</span>
            <img class="img-fluid rounded-3 object-fit-cover mb-2 w-100"
            :src="article.image"
            :alt="'img'+`${article.id}`" style="height: 300px;">
            <h4 style="min-height: 60px;">{{article.title}}</h4>
            <RouterLink class="btn btn-primary" :to="`/blog/${article.id}`">閱讀更多</RouterLink>
          </div>
        </div>
      </div>
    </div>
</template>
<script>
// import banner from '@/components/BannerView.vue'
import 'swiper/css'
import 'swiper/css/navigation'
import 'swiper/css/pagination'
import 'swiper/css/thumbs'
import { Navigation, Pagination } from 'swiper'
import { Swiper, SwiperSlide } from 'swiper/vue'
import { mapActions, mapState } from 'pinia'
import CartStore from '@/stores/CartStore'
import ProductStore from '../../stores/ProductStore'
const { VITE_APP_API_URL, VITE_APP_API_NAME } = import.meta.env
export default {
  data () {
    return {
      modules: [Navigation, Pagination],
      articleList: []
    }
  },
  methods: {
    ...mapActions(ProductStore, ['getProductAllData']),
    getArticle () {
      const loader = this.$loading.show()
      this.axios.get(`${VITE_APP_API_URL}/api/${VITE_APP_API_NAME}/articles`)
        .then((res) => {
          this.articleList = res.data.articles
          console.log(this.articleList)
          loader.hide()
        })
        .catch((err) => {
          alert(err.response.data.message)
          console.log(err.data)
        })
    },
    ...mapActions(CartStore, ['addToCart'])
  },
  components: {
    // banner,
    Swiper,
    SwiperSlide
  },
  computed: {
    ...mapState(ProductStore, ['products'])
  },
  mounted () {
    this.getProductAllData()
    this.getArticle()
  }

}
</script>
<style scoped>
  @media (max-width: 768px) {
    .position-none{
      position: static !important;
    }
  }
.addtocart-btn {
    opacity: 0;
  }
  .hovershow-btn:hover {
    .addtocart-btn {
      opacity: 1;
    }
  }

</style>
