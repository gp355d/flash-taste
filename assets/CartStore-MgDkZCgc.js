import{H as d,I as i}from"./index-3rBGGD-7.js";import{S as a}from"./sweetalert2.all-MRn1yC2v.js";const l=d("status",{state:()=>({isLoading:!1})});var f={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"leo535",BASE_URL:"/flash-taste/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const c=l(),{VITE_APP_API_URL:n,VITE_APP_API_NAME:r}=f,p=d("Cart",{state:()=>({carts:[],cartNum:0,total:0,finalTotal:0,isLoadingStatus:{ItemId:""},isLoading:!1,loadingItem:""}),actions:{getCarts(){c.isLoading=!0,i.get(`${n}/api/${r}/cart`).then(t=>{const{data:e}=t.data;this.carts=e,this.cartNum=e.carts.length,this.total=t.data.data.total,this.final_total=t.data.data.final_total,c.isLoading=!1}).catch(t=>{a.fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})})},addToCart(t,e=1){const s={data:{product_id:t,qty:e}};this.isLoadingStatus.ItemId=t,i.post(`${n}/api/${r}/cart`,s).then(o=>{a.fire({position:"top-end",icon:"success",title:o.data.message,showConfirmButton:!1,timer:1500}),this.getCarts(),this.isLoadingStatus.ItemId=""}).catch(o=>{a.fire({position:"top-end",icon:"error",title:o.response,showConfirmButton:!1,timer:1500})})},changeToCart(t,e=1){const s={data:{product_id:t.product_id,qty:e}};i.put(`${n}/api/${r}/cart/${t.id}`,s).then(o=>{a.fire({position:"top-end",icon:"success",title:o.data.message,showConfirmButton:!1,timer:1500}),this.getCarts()}).catch(o=>{alert(o.response.data.message)})},deleteCart(t){a.fire({title:"確認是否要刪除?",text:"此動作將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#46633D",cancelButtonText:"取消",confirmButtonText:"確認刪除"}).then(e=>{e.isConfirmed&&i.delete(`${n}/api/${r}/cart/${t}`).then(s=>{a.fire({position:"top-end",icon:"success",title:`該商品${s.data.message}`,showConfirmButton:!1,timer:1500}),this.loadingItem="",this.getCarts()}).catch(s=>{a.fire({position:"top-end",icon:"error",title:s.response.data.message,showConfirmButton:!1,timer:1500}),this.loadingItem=""})})},deleteAllCarts(){i.delete(`${n}/api/${r}/carts`).then(t=>{alert("購物車列表"+t.data.message),this.getCarts()}).catch(t=>{a.fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})})}}});export{p as C,l as s};
