import{E as c,G as s}from"./index-Zq8gSJsz.js";import{S as a}from"./sweetalert2.all-lOhIckfE.js";var d={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"leo535",BASE_URL:"/flash-taste/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:i,VITE_APP_API_NAME:r}=d,h=c("Cart",{state:()=>({carts:[],cartNum:0,total:0,finalTotal:0,isLoadingStatus:{ItemId:""}}),actions:{getCarts(){s.get(`${i}/api/${r}/cart`).then(t=>{const{data:e}=t.data;this.carts=e,this.cartNum=e.carts.length,this.total=t.data.data.total,this.final_total=t.data.data.final_total}).catch(t=>{a.fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})})},addToCart(t,e=1){const n={data:{product_id:t,qty:e}};this.isLoadingStatus.ItemId=t,s.post(`${i}/api/${r}/cart`,n).then(o=>{a.fire({position:"top-end",icon:"success",title:o.data.message,showConfirmButton:!1,timer:1500}),this.getCarts(),this.isLoadingStatus.ItemId=""}).catch(o=>{a.fire({position:"top-end",icon:"error",title:o.response,showConfirmButton:!1,timer:1500})})},changeToCart(t,e=1){const n={data:{product_id:t.product_id,qty:e}};s.put(`${i}/api/${r}/cart/${t.id}`,n).then(o=>{a.fire({position:"top-end",icon:"success",title:o.data.message,showConfirmButton:!1,timer:1500}),this.getCarts()}).catch(o=>{a.fire({position:"top-end",icon:"error",title:o.response.data.message,showConfirmButton:!1,timer:1500})})},deleteCart(t){s.delete(`${i}/api/${r}/cart/${t}`).then(e=>{a.fire({position:"top-end",icon:"success",title:`該商品${e.data.message}`,showConfirmButton:!1,timer:1500}),this.loadingItem="",this.getCarts()}).catch(e=>{a.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500}),this.loadingItem=""})},deleteAllCarts(){s.delete(`${i}/api/${r}/carts`).then(t=>{alert("購物車列表"+t.data.message),this.getCarts()}).catch(t=>{a.fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})})}}});export{h as C};
