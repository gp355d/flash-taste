import{E as c,G as s}from"./index-Q2DV9-bg.js";import{S as o}from"./sweetalert2.all-uOdz_5DA.js";var d={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"leo535",BASE_URL:"/flash-taste/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:i,VITE_APP_API_NAME:r}=d,m=c("Cart",{state:()=>({carts:[],cartNum:0,total:0,finalTotal:0,isLoadingStatus:{ItemId:""}}),actions:{getCarts(){s.get(`${i}/api/${r}/cart`).then(t=>{const{data:a}=t.data;this.carts=a,this.cartNum=a.carts.length,this.total=t.data.data.total,this.final_total=t.data.data.final_total,console.log(this.cartNum)}).catch(t=>{alert(t.response.data.message)})},addToCart(t,a=1){const n={data:{product_id:t,qty:a}};this.isLoadingStatus.ItemId=t,s.post(`${i}/api/${r}/cart`,n).then(e=>{o.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}),this.getCarts(),this.isLoadingStatus.ItemId=""}).catch(e=>{o.fire({position:"top-end",icon:"error",title:e.response,showConfirmButton:!1,timer:1500}),console.log(e)})},changeToCart(t,a=1){const n={data:{product_id:t.product_id,qty:a}};s.put(`${i}/api/${r}/cart/${t.id}`,n).then(e=>{o.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}),this.getCarts()}).catch(e=>{alert(e.response.data.message)})},deleteCart(t){s.delete(`${i}/api/${r}/cart/${t}`).then(a=>{o.fire({position:"top-end",icon:"success",title:`該商品${a.data.message}`,showConfirmButton:!1,timer:1500}),this.loadingItem="",this.getCarts()}).catch(a=>{o.fire({position:"top-end",icon:"error",title:a.response.data.message,showConfirmButton:!1,timer:1500}),this.loadingItem=""})},deleteAllCarts(){s.delete(`${i}/api/${r}/carts`).then(t=>{alert("購物車列表"+t.data.message),this.getCarts()}).catch(t=>{alert(t.response.data.message)})}}});export{m as C};
