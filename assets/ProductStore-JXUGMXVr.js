import{H as o,I as a}from"./index-LwfYF3F_.js";import{S as s}from"./sweetalert2.all-cav2bzh3.js";import{s as r}from"./CartStore-0fBK-XfZ.js";var c={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"leo535",BASE_URL:"/flash-taste/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const e=r(),{VITE_APP_API_URL:d,VITE_APP_API_NAME:f}=c,p=o("Product",{state:()=>({tempProducts:[],favoriteList:{id:[],list:[]},categories:[],category:"",products:[],isLoading:!1}),actions:{setCategory(t=""){this.category=t},createCategories(){if(this.products.length!==0){const t=this.products.map(i=>i.category);this.categories=[...new Set(t)]}},addToFavorite(t){const i=this.favoriteList.id.indexOf(t);i===-1?(this.favoriteList.id.push(t),s.fire({position:"top-end",icon:"success",title:"已收藏",showConfirmButton:!1,timer:1500})):(this.favoriteList.id.splice(i,1),s.fire({position:"top-end",icon:"success",title:"取消收藏",showConfirmButton:!1,timer:1500})),localStorage.setItem("favoriteId",JSON.stringify(this.favoriteList.id)),this.getProductAllData()},getid(){this.favoriteList.id=JSON.parse(localStorage.getItem("favoriteId"))||[]},checkCollection(){this.favoriteList.list=[],this.products.forEach(t=>{this.favoriteList.id.indexOf(t.id)>-1&&this.favoriteList.list.push(t)})},getProductAllData(){e.isLoading=!0,a.get(`${d}/api/${f}/products/all`).then(t=>{const{products:i}=t.data;this.products=i,this.getid(),this.checkCollection(),this.createCategories(),e.isLoading=!1}).catch(t=>{alert(t.response.data.message)})}}});export{p as P};
