import{E as s,G as i}from"./index-G37FbWeX.js";import{S as o}from"./sweetalert2.all-0C7aQ452.js";var a={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"leo535",BASE_URL:"/flash-taste/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:r,VITE_APP_API_NAME:c}=a,f=s("Product",{state:()=>({favoriteList:{id:[],list:[]},categories:[],category:"",products:[]}),actions:{setCategory(t=""){this.category=t},createCategories(){if(this.products.length!==0){const t=this.products.map(e=>e.category);this.categories=[...new Set(t)]}},addToFavorite(t){const e=this.favoriteList.id.indexOf(t);e===-1?(this.favoriteList.id.push(t),o.fire({position:"top-end",icon:"success",title:"已收藏",showConfirmButton:!1,timer:1500})):(this.favoriteList.id.splice(e,1),o.fire({position:"top-end",icon:"success",title:"取消收藏",showConfirmButton:!1,timer:1500})),localStorage.setItem("favoriteId",JSON.stringify(this.favoriteList.id)),this.getProductAllData()},getid(){this.favoriteList.id=JSON.parse(localStorage.getItem("favoriteId"))||[]},getProductAllData(){i.get(`${r}/api/${c}/products/all`).then(t=>{const{products:e}=t.data;console.log(e),this.products=e,this.createCategories()}).catch(t=>{alert(t.response.data.message)})}}});export{f as P};
