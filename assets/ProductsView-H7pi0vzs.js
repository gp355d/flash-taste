import{P as b}from"./PaginationCom-404V-DqI.js";import{_ as v,f as p,m as y,r as k,o,c as i,a as t,n as h,i as l,F as g,g as m,b as P,t as a}from"./index-G37FbWeX.js";import{C}from"./CartStore-5NoZYp9z.js";import{P as f}from"./ProductStore-6k14caFR.js";import"./sweetalert2.all-0C7aQ452.js";var w={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"leo535",BASE_URL:"/flash-taste/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:A,VITE_APP_API_NAME:x}=w,$={data(){return{products:[],page:{}}},watch:{category(){this.getProducts()}},methods:{getProducts(s=1){const c=this.$loading.show();this.axios.get(`${A}/api/${x}/products/?page=${s}&category=${this.category}`).then(r=>{this.products=r.data.products,this.page=r.data.pagination,c.hide()}).catch(r=>{console.log(r)})},more(s){this.$router.push(`/product/${s}`)},...p(C,["addToCart"]),...p(f,["getid","addToFavorite","setCategory","getProductAllData"])},mounted(){this.getProducts(),this.getProductAllData(),this.getid()},computed:{...y(f,["favoriteList","categories","category"])},components:{PaginationCom:b}},D=t("div",{class:"position-relative mb-3",style:{"background-image":"url('https://images.unsplash.com/photo-1597318181409-cf64d0b5d8a2?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')","background-size":"cover","background-repeat":"no-repeat","background-position":"center",height:"300px"}},[t("div",{class:"px-lg-5 py-lg-2 px-4 py-3 position-absolute top-50 start-50 translate-middle",style:{background:"rgba(255, 255, 255, 0.6)","border-radius":"24px"}},[t("h1",null,"產品列表")])],-1),E={class:"container"},V={class:"row"},I={class:"col-lg-3 mb-md-0 mb-2"},T={class:"list-group shadow-sm"},M=t("li",{class:"list-group-item"},"產品類別",-1),S={class:"list-group-item"},B=["onClick"],L={class:"col-lg-9"},R={class:"row gx-2"},F={class:"card mb-3"},G={class:"fw-bold text-primary"},N={class:""},U=["onClick"],j=["src","alt","onClick"],H={class:"p-2"},O={class:"badge bg-primary mb-2"},z={class:"d-flex align-items-center justify-content-between"},q={class:"card-title fs-4 fw-bold mb-0"},W=["onClick"],Y={key:0,class:"bi bi-heart fs-2",style:{cursor:"pointer"}},J={key:1,class:"bi bi-heart-fill fs-2"},K={class:"fw-normal d-block text-truncate",style:{height:"48px","vertical-align":"middle"}},Q={key:0,class:"fs-5 fw-bold d-flex align-items-center"},X={class:"fs-2 text-danger fw-bold"},Z={class:"fs-5 fw-bold text-black"},tt={key:1,class:"fs-2 text-danger fw-bold"},et={class:"d-grid gap-2 mx-auto col-8 mb-2"},st=["onClick"];function ot(s,c,r,it,_,d){const u=k("PaginationCom");return o(),i(g,null,[D,t("div",E,[t("div",V,[t("div",I,[t("ul",T,[M,t("li",S,[t("a",{href:"#",class:h(["list-group-item",{active:s.category===""}]),onClick:c[0]||(c[0]=l(e=>s.setCategory(""),["prevent"]))},"全部商品",2)]),(o(!0),i(g,null,m(s.categories,(e,n)=>(o(),i("li",{class:"list-group-item",key:e+n},[t("a",{href:"#",class:h(["list-group-item list-group-item-action",{active:s.category===e}]),onClick:l(at=>s.setCategory(e),["prevent"])},a(e),11,B)]))),128))])]),t("div",L,[t("div",R,[(o(!0),i(g,null,m(_.products,e=>(o(),i("div",{class:"col-md-4",key:e.id},[t("div",F,[t("div",G,[t("div",N,[t("a",{class:"product d-block mb-2 rounded-top",onClick:n=>d.more(e.id),style:{cursor:"pointer"}},[t("img",{src:e.imageUrl,class:"product-img card-img-top object-fit-cover mb-2",alt:`product-img-${e.id}`,height:"200",onClick:n=>d.more(e.id)},null,8,j)],8,U),t("div",H,[t("span",O,a(e.category),1),t("div",z,[t("h5",q,a(e.title),1),t("a",{class:"d-block",href:"#",onClick:l(()=>s.addToFavorite(e.id),["prevent"])},[s.favoriteList.id.indexOf(e.id)===-1?(o(),i("i",Y)):(o(),i("i",J))],8,W)]),t("span",K,a(e.description.replace(/<[^>]*>|<\/[^>]*>/gm,"")),1),e.price!==e.origin_price?(o(),i("div",Q,[t("span",X,a(s.$filters.currency(e.price)),1),t("del",Z,a(s.$filters.currency(e.origin_price)),1)])):(o(),i("span",tt,a(s.$filters.currency(e.origin_price)),1))])]),t("div",et,[t("a",{class:"btn btn-outline-primary fw-normal",onClick:l(n=>s.addToCart(e.id),["prevent"])}," 加入購物車",8,st)])])])]))),128))]),P(u,{"page-info":_.page,onGetProducts:d.getProducts},null,8,["page-info","onGetProducts"])])])])],64)}const gt=v($,[["render",ot]]);export{gt as default};
